<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &mdash; MC3 2.2.3 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="MC3 2.2.3 documentation" href="index.html" />
    <link rel="next" title="MCMC Tutorial" href="mctutorial.html" />
    <link rel="prev" title="Multi-Core Markov-Chain Monte Carlo (MC3)" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="mctutorial.html" title="MCMC Tutorial"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Multi-Core Markov-Chain Monte Carlo (MC3)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MC3 2.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<span id="getstarted"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="system-requirements">
<h2>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">MC3</span></code> (version 2.2) is known to work on Unix/Linux (Ubuntu)
and OSX (10.9+) machines, with the following software:</p>
<ul class="simple">
<li>Python (version 2.7+ and 3.4+)</li>
<li>Numpy (version 1.8.2+)</li>
<li>Scipy (version 0.13.3+)</li>
<li>Matplotlib (version 1.3.1+)</li>
</ul>
<p><code class="docutils literal"><span class="pre">MC3</span></code> may work with previous versions of these software;
however, we do not guarantee nor provide support for that.</p>
</div>
<div class="section" id="install">
<h2>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h2>
<p>To obtain the latest MCcubed code, clone the repository to your local
machine with the following terminal commands.
First, keep track of the folder where you are putting <code class="docutils literal"><span class="pre">MC3</span></code>:</p>
<div class="highlight-shell"><div class="highlight"><pre><span class="nv">topdir</span><span class="o">=</span><span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>
git clone https://github.com/pcubillos/MCcubed
</pre></div>
</div>
</div>
<div class="section" id="compile">
<h2>Compile<a class="headerlink" href="#compile" title="Permalink to this headline">¶</a></h2>
<p>Compile the C-extensions of the package and the documentation:</p>
<div class="highlight-shell"><div class="highlight"><pre><span class="nb">cd</span> <span class="nv">$topdir</span>/MCcubed/
make
</pre></div>
</div>
<p>A pdf version of this documentation will be available in <code class="docutils literal"><span class="pre">$topdir/MCcubed/docs/latex/MC3.pdf</span></code>.
To remove the program binaries, execute (from the respective directories):</p>
<div class="highlight-shell"><div class="highlight"><pre>make clean
</pre></div>
</div>
</div>
<div class="section" id="example-1-interactive">
<h2>Example 1 (Interactive)<a class="headerlink" href="#example-1-interactive" title="Permalink to this headline">¶</a></h2>
<p>The following example (<a class="reference external" href="https://github.com/pcubillos/MCcubed/blob/master/examples/demo01/demo01.py">demo01</a>) shows a basic MCMC run with <code class="docutils literal"><span class="pre">MC3</span></code> from
the Python interpreter.
This example fits a quadratic polynomial curve to a dataset.
First create a folder to run the example (alternatively, run the example
from any location, but adjust the paths of the Python script):</p>
<div class="highlight-shell"><div class="highlight"><pre><span class="nb">cd</span> <span class="nv">$topdir</span>
mkdir run01
<span class="nb">cd </span>run01
</pre></div>
</div>
<p>Now start a Python interactive session.  This script imports the necesary modules, creates a noisy dataset, and runs the MCMC:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;../MCcubed/&quot;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">MCcubed</span> <span class="kn">as</span> <span class="nn">mc3</span>

<span class="c"># Get function to model (and sample):</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;../MCcubed/examples/models/&quot;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">quadratic</span> <span class="kn">import</span> <span class="n">quad</span>

<span class="c"># Create a synthetic dataset:</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>         <span class="c"># Independent model variable</span>
<span class="n">p0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.4</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>                  <span class="c"># True-underlying model parameters</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">quad</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>                      <span class="c"># Noiseless model</span>
<span class="n">uncert</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>          <span class="c"># Data points uncertainty</span>
<span class="n">error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">uncert</span><span class="p">)</span>  <span class="c"># Noise for the data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">error</span>                     <span class="c"># Noisy data set</span>

<span class="c"># Fit the quad polynomial coefficients:</span>
<span class="n">params</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">10.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>  <span class="c"># Initial guess of fitting params.</span>
<span class="n">stepsize</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">])</span>

<span class="c"># Run the MCMC:</span>
<span class="n">bestp</span><span class="p">,</span> <span class="n">uncertp</span><span class="p">,</span> <span class="n">posterior</span><span class="p">,</span> <span class="n">Zchain</span><span class="p">,</span> <span class="o">=</span> <span class="n">mc3</span><span class="o">.</span><span class="n">mcmc</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">uncert</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">quad</span><span class="p">,</span>
   <span class="n">indparams</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">stepsize</span><span class="o">=</span><span class="n">stepsize</span><span class="p">,</span> <span class="n">nsamples</span><span class="o">=</span><span class="mf">1e5</span><span class="p">,</span> <span class="n">burnin</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="outputs">
<h3>Outputs<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h3>
<p>That&#8217;s it, now let&#8217;s see the results.  <code class="docutils literal"><span class="pre">MC3</span></code> will print out to screen a
progress report every 10% of the MCMC run, showing the time, number of
times a parameter tried to go beyond the boundaries, the current
best-fitting values, and corresponding <span class="math">\(\chi^{2}\)</span>; for example:</p>
<div class="highlight-none"><div class="highlight"><pre>::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
  Multi-Core Markov-Chain Monte Carlo (MC3).
  Version 2.2.0.
  Copyright (c) 2015-2016 Patricio Cubillos and collaborators.
  MC3 is open-source software under the MIT license (see LICENSE).
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

Start MCMC chains  (Sun May  1 14:52:53 2016)

[:         ]  10.0% completed  (Sun May  1 14:52:53 2016)
Out-of-bound Trials:
[0 0 0]
Best Parameters: (chisq=1061.6057)
[ 3.10350813 -2.46601555  0.50964946]

...

[::::::::::] 100.0% completed  (Sun May  1 14:52:57 2016)
Out-of-bound Trials:
[0 0 0]
Best Parameters: (chisq=1061.5782)
[ 3.11692156 -2.47161143  0.50981927]

Fin, MCMC Summary:
------------------
  Total number of samples:            100002
  Number of parallel chains:               7
  Average iterations per chain:        14286
  Burned in iterations per chain:       1000
  Thinning factor:                         1
  MCMC sample (thinned, burned) size:  93002
  Acceptance rate:   28.53%

  Best-fit params   Uncertainties        S/N      Sample Mean   Note
    3.1169216e+00   1.2041874e-01      25.88    3.1195138e+00
   -2.4716114e+00   6.9075099e-02      35.78   -2.4727370e+00
    5.0981927e-01   8.4245390e-03      60.52    5.1003106e-01

  Best-parameter&#39;s chi-squared:     1061.5782
  Bayesian Information Criterion:   1082.3014
  Reduced chi-squared:                 1.0648
  Standard deviation of residuals:  2.849
</pre></div>
</div>
<p>At the end of the MCMC run, <code class="docutils literal"><span class="pre">MC3</span></code> displays a summary of the MCMC sample,
best-fitting parameters, uncertainties, mean values, and other statistics.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More information will be displayed, depending on the MCMC configuration (see the <a class="reference internal" href="mctutorial.html#mctutorial"><span>MCMC Tutorial</span></a>).</p>
</div>
<p>Additionally, the user has the option to generate several plots of the MCMC
sample: the best-fitting model and data curves, parameter traces, and
marginal and pair-wise posteriors (these plots can also be generated
automatically with the MCMC run by setting <code class="docutils literal"><span class="pre">plots=True</span></code>).
The plots sub-package provides the plotting functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Plot best-fitting model and binned data:</span>
<span class="n">mc3</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">modelfit</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">uncert</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Best-fitting Model&quot;</span><span class="p">,</span>
                   <span class="n">savefile</span><span class="o">=</span><span class="s">&quot;quad_bestfit.png&quot;</span><span class="p">)</span>
<span class="c"># Plot trace plot:</span>
<span class="n">parname</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;constant&quot;</span><span class="p">,</span> <span class="s">&quot;linear&quot;</span><span class="p">,</span> <span class="s">&quot;quadratic&quot;</span><span class="p">]</span>
<span class="n">mc3</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">trace</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="n">Zchain</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Fitting-parameter Trace Plots&quot;</span><span class="p">,</span>
                <span class="n">parname</span><span class="o">=</span><span class="n">parname</span><span class="p">,</span> <span class="n">savefile</span><span class="o">=</span><span class="s">&quot;quad_trace.png&quot;</span><span class="p">)</span>

<span class="c"># Plot pairwise posteriors:</span>
<span class="n">mc3</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">pairwise</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Pairwise posteriors&quot;</span><span class="p">,</span> <span class="n">parname</span><span class="o">=</span><span class="n">parname</span><span class="p">,</span>
                   <span class="n">savefile</span><span class="o">=</span><span class="s">&quot;quad_pairwise.png&quot;</span><span class="p">)</span>

<span class="c"># Plot marginal posterior histograms:</span>
<span class="n">mc3</span><span class="o">.</span><span class="n">plots</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">posterior</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Marginal posterior histograms&quot;</span><span class="p">,</span>
                    <span class="n">parname</span><span class="o">=</span><span class="n">parname</span><span class="p">,</span> <span class="n">savefile</span><span class="o">=</span><span class="s">&quot;quad_hist.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/quad_bestfit.png"><img alt="_images/quad_bestfit.png" src="_images/quad_bestfit.png" style="width: 50%;" /></a>
<a class="reference internal image-reference" href="_images/quad_trace.png"><img alt="_images/quad_trace.png" src="_images/quad_trace.png" style="width: 50%;" /></a>
<a class="reference internal image-reference" href="_images/quad_pairwise.png"><img alt="_images/quad_pairwise.png" src="_images/quad_pairwise.png" style="width: 50%;" /></a>
<a class="reference internal image-reference" href="_images/quad_hist.png"><img alt="_images/quad_hist.png" src="_images/quad_hist.png" style="width: 50%;" /></a>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These plots can also be automatically generated along with the
MCMC run (see <a class="reference external" href="http://pcubillos.github.io/MCcubed/tutorial.html#file-outputs">File Outputs</a>).</p>
</div>
</div>
</div>
<div class="section" id="example-2-shell-run">
<h2>Example 2 (Shell Run)<a class="headerlink" href="#example-2-shell-run" title="Permalink to this headline">¶</a></h2>
<p>The following example
(<a class="reference external" href="https://github.com/pcubillos/MCcubed/blob/master/examples/demo02/">demo02</a>)
shows a basic MCMC run from the shell prompt.
To start, create a working directory to place the files and execute the program:</p>
<div class="highlight-shell"><div class="highlight"><pre><span class="nb">cd</span> <span class="nv">$topdir</span>
mkdir run02
<span class="nb">cd </span>run02
</pre></div>
</div>
<p>Copy the demo files (configuration and data files) to the run folder:</p>
<div class="highlight-shell"><div class="highlight"><pre>cp <span class="nv">$topdir</span>/MCcubed/examples/demo02/* .
</pre></div>
</div>
<p>Call the <code class="docutils literal"><span class="pre">MC3</span></code> executable, providing the configuration file as
command-line argument:</p>
<div class="highlight-shell"><div class="highlight"><pre><span class="nv">$topdir</span>/MCcubed/mc3.py -c MCMC.cfg
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install">Install</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compile">Compile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-1-interactive">Example 1 (Interactive)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#outputs">Outputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example-2-shell-run">Example 2 (Shell Run)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mctutorial.html">MCMC Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="fittutorial.html">Optimization Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Multi-Core Markov-Chain Monte Carlo (MC3)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mctutorial.html"
                        title="next chapter">MCMC Tutorial</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="mctutorial.html" title="MCMC Tutorial"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Multi-Core Markov-Chain Monte Carlo (MC3)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MC3 2.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015-2016, Patricio Cubillos.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>